# 睡眠計測アプリ仕様書

## 1. アプリ概要

### 1.1 アプリ名
Sleep Tracker（仮）

### 1.2 コンセプト
ポケモンスリープのような楽しさを持ちながら、軽量でシンプルな睡眠計測アプリ

### 1.3 主要機能
- 睡眠の開始・終了記録
- 睡眠時間の計測
- 睡眠の質の分析（簡易版）
- 睡眠履歴の表示
- 統計情報の表示
- モチベーション維持のためのゲーミフィケーション要素

## 2. 機能要件

### 2.1 睡眠計測機能
- **睡眠開始ボタン**
  - ワンタップで睡眠計測開始
  - バックグラウンドでの動作継続
  - 省電力モード対応

- **睡眠終了ボタン**
  - 起床時にワンタップで記録終了
  - 睡眠時間の自動計算

- **睡眠中の記録**
  - 加速度センサーを使用した体動検知（オプション）
  - マイクを使用したいびき検知（オプション）
  - バッテリー消費を最小限に抑える設計

### 2.2 データ表示機能
- **今日の睡眠**
  - 睡眠時間
  - 就寝時刻・起床時刻
  - 睡眠の質スコア（シンプルな指標）

- **睡眠履歴**
  - カレンダー形式での表示
  - 週間・月間の睡眠グラフ
  - 平均睡眠時間の表示

- **統計情報**
  - 平均就寝時刻
  - 平均起床時刻
  - 平均睡眠時間
  - 睡眠の規則性スコア

### 2.3 ゲーミフィケーション要素
- **睡眠ポイント**
  - 規則正しい睡眠でポイント獲得
  - 目標睡眠時間達成でボーナス

- **アチーブメント**
  - 連続記録日数
  - 累計睡眠時間
  - 早寝早起きチャレンジ

- **キャラクター/コレクション**
  - シンプルなキャラクターやアイテムの収集要素
  - 睡眠の質に応じて変化

### 2.4 設定機能
- **目標設定**
  - 目標睡眠時間
  - 目標就寝時刻
  - 目標起床時刻

- **通知設定**
  - 就寝リマインダー
  - 起床アラーム（オプション）

- **データ管理**
  - データのエクスポート（CSV形式）
  - データのバックアップ・復元

## 3. 非機能要件

### 3.1 パフォーマンス
- アプリ起動時間：3秒以内
- バッテリー消費：睡眠計測中も最小限に抑える
- ストレージ使用量：100MB以下

### 3.2 ユーザビリティ
- 直感的なUI/UX
- ダークモード対応（睡眠前の目への優しさ）
- アクセシビリティ対応

### 3.3 プライバシー・セキュリティ
- ローカルデータ保存（クラウド同期はオプション）
- センサーデータの適切な管理
- プライバシーポリシーの明示

## 4. 技術仕様

### 4.1 開発環境
- Flutter（クロスプラットフォーム開発）
- Dart言語
- iOS/Android対応

### 4.2 主要パッケージ（予定）
- **状態管理**: Provider or Riverpod
- **ローカルDB**: sqflite or Hive
- **グラフ表示**: fl_chart
- **通知**: flutter_local_notifications
- **センサー**: sensors_plus
- **バックグラウンド処理**: workmanager

### 4.3 データモデル
```
SleepRecord {
  id: String
  startTime: DateTime
  endTime: DateTime
  duration: Duration
  quality: double (0-100)
  movements: List<Movement>
  createdAt: DateTime
}

UserProfile {
  id: String
  targetSleepHours: double
  targetBedtime: TimeOfDay
  targetWakeTime: TimeOfDay
  points: int
  achievements: List<Achievement>
}
```

## 5. 開発フェーズ

### Phase 1: MVP（最小限の機能）
1. 基本的な睡眠記録機能
2. シンプルな履歴表示
3. ローカルデータ保存

### Phase 2: データ可視化
1. グラフ表示機能
2. 統計情報の追加
3. カレンダービュー

### Phase 3: ゲーミフィケーション
1. ポイントシステム
2. アチーブメント
3. シンプルなキャラクター要素

### Phase 4: 高度な機能
1. センサーを使った睡眠分析
2. 通知機能
3. データエクスポート

## 6. UI/UXデザイン方針

### 6.1 デザインコンセプト
- シンプルで落ち着いたデザイン
- 睡眠を連想させる青・紫系の配色
- 大きくて押しやすいボタン

### 6.2 主要画面
1. **ホーム画面**
   - 大きな睡眠開始/終了ボタン
   - 今日の睡眠情報
   - クイックアクセスメニュー

2. **履歴画面**
   - カレンダービュー
   - リストビュー切り替え
   - フィルター機能

3. **統計画面**
   - グラフ表示
   - 各種統計情報
   - 期間選択

4. **プロフィール画面**
   - ポイント・アチーブメント表示
   - 設定へのアクセス
   - データ管理

## 7. 今後の検討事項

- Apple HealthKit / Google Fitとの連携
- ウェアラブルデバイス対応
- 睡眠の質を向上させるためのアドバイス機能
- ソーシャル機能（友達との睡眠チャレンジなど）
- 有料プレミアム機能の検討